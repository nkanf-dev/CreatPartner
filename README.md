# CreatPartner - AIé©±åŠ¨çš„åˆ›æ–°ç«èµ›åŠ©æ‰‹

åŸºäº Pydantic AI å¤šä»£ç†æ¶æ„å¼€å‘çš„æ™ºèƒ½ç ”ç©¶åŠ©æ‰‹ï¼Œä¸“ä¸ºå¤§å­¦ç”Ÿåˆ›æ–°åˆ›ä¸šç«èµ›æä¾›å…¨æ–¹ä½çš„ä¿¡æ¯æ£€ç´¢ã€çŸ¥è¯†ç®¡ç†å’Œé¡¹ç›®åˆ†ææ”¯æŒã€‚

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½

### å¤šä»£ç†æ¶æ„è®¾è®¡

åŸºäºPydantic AIæœ€ä½³å®è·µï¼Œé‡‡ç”¨**æ™ºèƒ½ä½“å§”æ‰˜**å’Œ**ç¨‹åºåŒ–æ™ºèƒ½ä½“äº¤æ¥**æ¨¡å¼ï¼š

#### 1. ç ”ç©¶åè°ƒå™¨ (ResearchCoordinator)
- **æ™ºèƒ½ä½“å§”æ‰˜**: è‡ªåŠ¨é€‰æ‹©åˆé€‚çš„å­ä»£ç†å¤„ç†ä»»åŠ¡
- **æœç´¢ä»£ç†å§”æ‰˜**: å§”æ‰˜ç½‘ç»œå’Œå­¦æœ¯æœç´¢ä»»åŠ¡
- **çŸ¥è¯†ä»£ç†å§”æ‰˜**: å§”æ‰˜çŸ¥è¯†å­˜å‚¨å’ŒæŸ¥è¯¢ä»»åŠ¡
- **å·¥ä½œæµåè°ƒ**: ç¡®ä¿ä¿¡æ¯åœ¨ä¸åŒä»£ç†é—´æ­£ç¡®ä¼ é€’

#### 2. ç”¨æˆ·äº¤äº’ä»£ç† (InteractionAgent)
- **ä¸»è¦æ¥å£**: ç”¨æˆ·çš„ç›´æ¥äº¤äº’ç•Œé¢
- **éœ€æ±‚ç†è§£**: åˆ†æå’Œæ¾„æ¸…ç”¨æˆ·éœ€æ±‚
- **ç­–ç•¥åˆ¶å®š**: è‡ªåŠ¨é€‰æ‹©æœ€ä½³çš„ç ”ç©¶å’Œåˆ†æç­–ç•¥
- **ç»“æœæ•´åˆ**: æ±‡æ€»å¤šä¸ªä»£ç†çš„è¾“å‡ºå¹¶æä¾›ç»Ÿä¸€å›ç­”

#### 3. æœç´¢ä»£ç† (SearchAgent)
- **Webæœç´¢**: åŸºäºJina APIçš„ç½‘ç»œä¿¡æ¯æ£€ç´¢
- **å­¦æœ¯æœç´¢**: åŸºäºArxivçš„è®ºæ–‡æ£€ç´¢
- **æ™ºèƒ½åˆ†æ**: AIé©±åŠ¨çš„æœç´¢ç»“æœåˆ†æå’Œæ€»ç»“

#### 4. çŸ¥è¯†åº“ä»£ç† (KnowledgeAgent)
- **é¡¹ç›®é•¿æœŸè®°å¿†**: å­˜å‚¨é¡¹ç›®å†å²ã€å†³ç­–ã€ç»éªŒæ•™è®­
- **å¤–éƒ¨æ£€ç´¢èµ„æ–™**: æ•´ç†å’Œå½’æ¡£ä»å¤–éƒ¨è·å–çš„ç ”ç©¶èµ„æ–™
- **å‘é‡æœç´¢**: åŸºäºMongoDB Atlas Vector Searchå’ŒJina AIçš„è¯­ä¹‰æ£€ç´¢
- **æ™ºèƒ½åˆ†å‰²**: ä½¿ç”¨Jina Segmenterè‡ªåŠ¨åˆ†å‰²é•¿æ–‡æ¡£
- **é‡æ’åºä¼˜åŒ–**: ä½¿ç”¨Jina Rerankeræå‡æœç´¢ç›¸å…³æ€§

### ç¨‹åºåŒ–æ™ºèƒ½ä½“äº¤æ¥å·¥ä½œæµ

```
ç”¨æˆ·æŸ¥è¯¢ â†’ çŸ¥è¯†åº“æ£€æŸ¥ â†’ å¤–éƒ¨æœç´¢(å¦‚éœ€) â†’ ä¿¡æ¯æ•´åˆ â†’ æ™ºèƒ½å›ç­”
     â†“            â†“            â†“           â†“         â†“
ç”¨æˆ·äº¤äº’ä»£ç† â†’ çŸ¥è¯†ä»£ç† â†’ æœç´¢ä»£ç† â†’ ç ”ç©¶åè°ƒå™¨ â†’ ç”¨æˆ·äº¤äº’ä»£ç†
```

### ä¸¤ä¸ªçŸ¥è¯†åº“

#### é¡¹ç›®é•¿æœŸè®°å¿†çŸ¥è¯†åº“
- é¡¹ç›®å†³ç­–è®°å½•
- å¼€å‘è¿›å±•è·Ÿè¸ª
- ç»éªŒæ•™è®­æ€»ç»“
- å›¢é˜Ÿåä½œè®°å½•

#### å¤–éƒ¨æ£€ç´¢èµ„æ–™çŸ¥è¯†åº“
- Webæœç´¢ç»“æœ
- å­¦æœ¯è®ºæ–‡èµ„æ–™
- è¡Œä¸šæŠ¥å‘Šåˆ†æ
- ç«å“è°ƒç ”ä¿¡æ¯

## ğŸš€ æŠ€æœ¯æ ˆ

- **Agentæ¡†æ¶**: Pydantic AI (å¤šä»£ç†æ¶æ„)
- **å‘é‡æ•°æ®åº“**: MongoDB Atlas Vector Search
- **AIæœåŠ¡**: Jina AI (åµŒå…¥ã€é‡æ’åºã€åˆ†å‰²)
  - Jina Embeddings v3 (1024ç»´å‘é‡)
  - Jina Reranker v2 (å¤šè¯­è¨€é‡æ’åº)
  - Jina Segmenter (æ™ºèƒ½æ–‡æœ¬åˆ†å‰²)
- **ç½‘ç»œæœç´¢**: Jina Search API
- **å­¦æœ¯æœç´¢**: Arxiv API
- **Webç•Œé¢**: Streamlit
- **HTTPå®¢æˆ·ç«¯**: httpx
- **ç¯å¢ƒç®¡ç†**: python-dotenv

## ğŸ“¦ å¿«é€Ÿå¼€å§‹

### 1. ç³»ç»Ÿè¦æ±‚

- Python 3.12+
- MongoDB (æœ¬åœ°æˆ–Atlasäº‘æœåŠ¡)
- OpenAI API Key

### 2. å®‰è£…

```bash
# å…‹éš†é¡¹ç›®
git clone <repository-url>
cd CreatPartner

# è¿è¡Œè‡ªåŠ¨å®‰è£…è„šæœ¬
python install.py
```

### 3. é…ç½®ç¯å¢ƒ

ç¼–è¾‘ `.env` æ–‡ä»¶ï¼Œæ·»åŠ å¿…è¦çš„é…ç½®ï¼š

```bash
# å¿…éœ€é…ç½®
OPENAI_API_KEY=your_openai_api_key_here
MONGODB_URI=mongodb://localhost:27017

# å¯é€‰é…ç½®
JINA_API_KEY=your_jina_api_key_here
DEFAULT_MODEL=openai:gpt-4o
DB_NAME=creatpartner
MAX_SEARCH_RESULTS=5
```

### 4. å¯åŠ¨ç³»ç»Ÿ

```bash
# åŸºç¡€æ¼”ç¤º
python main.py

# å®Œæ•´å¼‚æ­¥æ¼”ç¤º
python main.py --async

# Streamlit Webç•Œé¢ (å¼€å‘ä¸­)
streamlit run app.py
```

## ğŸ’» ä½¿ç”¨ç¤ºä¾‹

### åŸºç¡€æœç´¢

```python
from search_agent import SearchAgent, SearchDependencies

# åˆ›å»ºæœç´¢ä»£ç†
agent = SearchAgent()
deps = SearchDependencies(max_results=5)

# æ‰§è¡Œæœç´¢
result = agent.search_sync("AIåœ¨æ•™è‚²ä¸­çš„åº”ç”¨", deps)
print(result)
```

### çŸ¥è¯†åº“ç®¡ç†

```python
from knowledge_agent import KnowledgeAgent, KnowledgeDependencies

# åˆ›å»ºçŸ¥è¯†åº“ä»£ç†
agent = KnowledgeAgent()
deps = KnowledgeDependencies(
    mongodb_uri="mongodb://localhost:27017",
    database_name="my_project"
)

# æ·»åŠ é¡¹ç›®è®°å¿†
await agent.manage_project_memory(
    "add",
    "ç¡®å®šä½¿ç”¨React + Node.jsæŠ€æœ¯æ ˆ",
    deps
)

# å¤„ç†å¤–éƒ¨èµ„æ–™
external_data = [
    {"title": "Reactæœ€ä½³å®è·µ", "content": "...", "source": "web"}
]
await agent.process_external_data(external_data, deps)
```

### ä¸»ä»£ç†ä½¿ç”¨

```python
from main_agent import create_creatpartner_agent

# åˆ›å»ºä¸»ä»£ç†
agent = create_creatpartner_agent()

# å¼€å§‹ç ”ç©¶ä¼šè¯
result = agent.start_research_session_sync(
    project_name="æ™ºèƒ½å­¦ä¹ åŠ©æ‰‹",
    project_description="åŸºäºAIçš„ä¸ªæ€§åŒ–æ•™è‚²å¹³å°"
)
print(result)
```

## ğŸ—ï¸ é¡¹ç›®ç»“æ„

```
CreatPartner/
â”œâ”€â”€ search_agent.py         # æœç´¢ä»£ç†å®ç°
â”œâ”€â”€ knowledge_agent.py      # çŸ¥è¯†åº“ä»£ç†å®ç°
â”œâ”€â”€ main_agent.py          # ä¸»ä»£ç†ç³»ç»Ÿ
â”œâ”€â”€ main.py               # æ¼”ç¤ºç¨‹åº
â”œâ”€â”€ install.py            # è‡ªåŠ¨å®‰è£…è„šæœ¬
â”œâ”€â”€ pyproject.toml        # é¡¹ç›®é…ç½®
â”œâ”€â”€ .env.example          # ç¯å¢ƒå˜é‡æ¨¡æ¿
â”œâ”€â”€ .env.sample           # ç¤ºä¾‹é…ç½®
â””â”€â”€ README.md            # é¡¹ç›®è¯´æ˜
```

## ğŸ”§ é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡è¯¦è§£

| å˜é‡å | è¯´æ˜ | å¿…éœ€ | é»˜è®¤å€¼ |
|--------|------|------|--------|
| `OPENAI_API_KEY` | OpenAI APIå¯†é’¥ | æ˜¯ | - |
| `MONGODB_URI` | MongoDBè¿æ¥å­—ç¬¦ä¸² | æ˜¯ | `mongodb://localhost:27017` |
| `JINA_API_KEY` | Jinaæœç´¢APIå¯†é’¥ | å¦ | - |
| `DEFAULT_MODEL` | é»˜è®¤AIæ¨¡å‹ | å¦ | `openai:gpt-4o` |
| `DB_NAME` | æ•°æ®åº“åç§° | å¦ | `creatpartner` |
| `MAX_SEARCH_RESULTS` | æœ€å¤§æœç´¢ç»“æœæ•° | å¦ | `5` |
| `EMBEDDING_MODEL` | åµŒå…¥æ¨¡å‹ | å¦ | `sentence-transformers/all-MiniLM-L6-v2` |

### MongoDBè®¾ç½®

1. **æœ¬åœ°MongoDB**:
   ```bash
   # å¯åŠ¨MongoDBæœåŠ¡
   mongod --dbpath /path/to/data
   ```

2. **MongoDB Atlas**:
   - åˆ›å»ºAtlasé›†ç¾¤
   - è·å–è¿æ¥å­—ç¬¦ä¸²
   - é…ç½®ç½‘ç»œè®¿é—®

## ğŸ§ª å¼€å‘æŒ‡å—

### æ‰©å±•æœç´¢å·¥å…·

```python
@search_agent.tool
async def custom_search(ctx: RunContext, query: str):
    # å®ç°è‡ªå®šä¹‰æœç´¢é€»è¾‘
    pass
```

### æ·»åŠ çŸ¥è¯†å¤„ç†å™¨

```python
@knowledge_agent.tool  
async def process_custom_data(ctx: RunContext, data: Dict):
    # å®ç°è‡ªå®šä¹‰æ•°æ®å¤„ç†é€»è¾‘
    pass
```

### è‡ªå®šä¹‰ä¸»ä»£ç†è¡Œä¸º

```python
# ä¿®æ”¹system_promptæ¥è°ƒæ•´AIè¡Œä¸º
agent = Agent(
    model_name,
    system_prompt="ä½ çš„è‡ªå®šä¹‰æç¤º..."
)
```

## ğŸ” åŠŸèƒ½ç‰¹æ€§

### æ™ºèƒ½æœç´¢
- å¤šæºä¿¡æ¯æ•´åˆ
- è¯­ä¹‰ç›¸ä¼¼åº¦åŒ¹é…
- å®æ—¶ç»“æœåˆ†æ
- è‡ªåŠ¨å»é‡å’Œæ’åº

### çŸ¥è¯†ç®¡ç†
- å‘é‡åŒ–å­˜å‚¨
- è¯­ä¹‰æ£€ç´¢
- è‡ªåŠ¨åˆ†ç±»æ ‡è®°
- ç‰ˆæœ¬æ§åˆ¶

### é¡¹ç›®åˆ†æ
- æŠ€æœ¯å¯è¡Œæ€§è¯„ä¼°
- å¸‚åœºç«äº‰åˆ†æ
- åˆ›æ–°ç‚¹è¯†åˆ«
- é£é™©è¯„ä¼°

### åä½œæ”¯æŒ
- å¤šç”¨æˆ·ä¼šè¯
- çŸ¥è¯†å…±äº«
- è¿›åº¦è·Ÿè¸ª
- å†³ç­–è®°å½•

## ğŸ“Š ä½¿ç”¨åœºæ™¯

### åˆ›æ–°åˆ›ä¸šç«èµ›
- é¡¹ç›®ç«‹é¡¹è°ƒç ”
- æŠ€æœ¯æ–¹æ¡ˆè®¾è®¡
- å¸‚åœºåˆ†ææŠ¥å‘Š
- å•†ä¸šè®¡åˆ’ä¹¦

### å­¦æœ¯ç ”ç©¶
- æ–‡çŒ®è°ƒç ”
- ç ”ç©¶æ–¹å‘æ¢ç´¢
- è®ºæ–‡å†™ä½œæ”¯æŒ
- å®éªŒè®¾è®¡

### äº§å“å¼€å‘
- éœ€æ±‚åˆ†æ
- æŠ€æœ¯é€‰å‹
- ç«å“åˆ†æ
- ç”¨æˆ·ç ”ç©¶

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **APIå¯†é’¥å®‰å…¨**: ä¸è¦å°†APIå¯†é’¥æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ
2. **æ•°æ®åº“å¤‡ä»½**: å®šæœŸå¤‡ä»½é‡è¦çš„é¡¹ç›®çŸ¥è¯†åº“
3. **ç½‘ç»œè®¿é—®**: ç¡®ä¿èƒ½è®¿é—®OpenAIã€Jinaç­‰APIæœåŠ¡
4. **èµ„æºé™åˆ¶**: æ³¨æ„å„APIçš„è°ƒç”¨é¢‘ç‡å’Œè´¹ç”¨é™åˆ¶
5. **æ•°æ®éšç§**: æ•æ„Ÿé¡¹ç›®ä¿¡æ¯å»ºè®®ä½¿ç”¨æœ¬åœ°éƒ¨ç½²

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤Issueså’ŒPull Requestsæ¥æ”¹è¿›è¿™ä¸ªé¡¹ç›®ï¼

### å¼€å‘æµç¨‹
1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
3. æäº¤æ›´æ”¹
4. åˆ›å»ºPull Request

### ä»£ç è§„èŒƒ
- éµå¾ªPEP 8
- æ·»åŠ ç±»å‹æ³¨è§£
- ç¼–å†™æµ‹è¯•ç”¨ä¾‹
- æ›´æ–°æ–‡æ¡£

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®åŸºäºMITè®¸å¯è¯å¼€æºã€‚

## ğŸ™ è‡´è°¢

- [Pydantic AI](https://ai.pydantic.org.cn/) - å¼ºå¤§çš„AI Agentæ¡†æ¶
- [MongoDB](https://www.mongodb.com/) - ä¼˜ç§€çš„å‘é‡æ•°æ®åº“
- [Jina](https://jina.ai/) - å…ˆè¿›çš„æœç´¢æŠ€æœ¯
- [Sentence Transformers](https://www.sbert.net/) - æ–‡æœ¬åµŒå…¥æ¨¡å‹

---

**CreatPartner** - è®©AIåŠ©åŠ›ä½ çš„åˆ›æ–°åˆ›ä¸šä¹‹è·¯ï¼ ğŸš€
